"use strict";var app=evo.module("peApp",["evo","evo.evoTraining.services","evo.common.directives","peControllers","ngCookies","ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"hello",controller:"MainController"}).when("/edit/:id",{templateUrl:"edit",controller:"EditCtrl"}),b.html5Mode(!0)}]),app.run(["seedService",function(a){a.fetchSeed()}]),evo.module("peControllers",["evo"]).controller("EditCtrl",[function(){}]),evo.module("peControllers",["evo"]).controller("MainController",["$rootScope","$scope","$log","evoAPI","seedService","$location",function(a,b,c,d,e,f){c.log("Loading web main controller"),b.message="Hello world",b.zipData=void 0,e.fetchSmallSeed().then(function(){}),a.$on("dataFetched",function(){b.table.data=void 0,b.table.data=e.data}),b.$watch("zipData",function(){console.log("watch fired"),b.table.data=b.zipData}),b.table={options:{pagination:{itemsPerPage:10},columns:{_id:"string",city:"string",pop:"string",state:"string",loc:"string",edit:{type:"button",icon:"fa fa-pencil-square-o",width:"50px",textAlign:"center",onclick:function(a,b,c,d){f.path("/edit/12")}},"delete":{type:"button",icon:["fa","fa-trash"],width:"60px",textAlign:"center","class":"btn-danger",onclick:function(a,b,c,d){console.log("Clicked Delete")}}}},data:{}}}]),evo.module("evo.evoTraining.services",[]).service("seedService",["evoAPI","$rootScope",function(a,b){var c=this;c.data={},c.fetchSeed=function(){a.callFunction("findAll").then(function(a){c.data=a.result})},c.fetchSmallSeed=function(){return a.callFunction("getZipByCity","BARRE").then(function(a){return c.data=a.result,console.log(c.data),b.$broadcast("dataFetched"),c.data})},b.$on("addRecord",function(b,d){console.log("seedService: Received event with message "+JSON.stringify(d.data)),a.callFunction("addRecord",d.data).then(function(){c.fetchSmallSeed()},function(a){console.log(a)})}),b.$on("updateRecord",function(b,d){console.log("seedService: Received event with message "+JSON.stringify(d.data)),a.callFunction("updateRecord",d.data).then(function(){c.fetchSmallSeed()},function(a){console.log(a)})})}]);